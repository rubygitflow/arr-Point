.map
  #map
  javascript: 
    DG.then(function() {
      var map;
      var location_detection_disabled = "#{ t('.location_detection_disabled') }";
      var lang = "#{ I18n.locale }";
      map = DG.map('map', {
        center: DG.latLng(55.75, 37.6245),
        fullscreenControl: false,
        zoom: 20
      })
      DG.control.scale({position: 'topright'}).addTo(map);
      DG.control.ruler({position: 'topright'}).addTo(map);
      DG.control.traffic({position: 'topright'}).addTo(map);  
      DG.control.location({position: 'topleft'}).addTo(map);

      map.locate({setView: true, watch: true})
      .on('locationfound', function(e) {
          DG.marker([e.latitude, e.longitude]).addTo(map);
      })
      .on('locationerror', function(e) {
          DG.popup()
            .setLatLng(map.getCenter())
            .setContent( location_detection_disabled )
            .openOn(map);
      })  
      map.setLang(lang);
    })

  .title = link_to "«#{ t('.service_name') }»", root_path, id:'service_name' 
  .menu  title="#{ t('.menu') }"
    .dropbtn onclick="dropFunction()"
    .dropup-content#menuDropup
      = link_to 'RU / EN', change_language_maps_path, id:'langbtn', data: { onclick:'changeLangFunction()'}
    javascript: 
      function dropFunction() {
        var elem = document.getElementById("menuDropup");
        if (elem.style.display=="block") {
          elem.style.display = "none";
        } else {
          elem.style.display = "block";
        }        
      }
