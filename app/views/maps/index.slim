.map
  #map
  javascript: 
    DG.then(function() {
      var map,
          marker;

      map = DG.map('map', {
          center: [55.7558, 37.6177],
          zoom: 13
      });

      marker = DG.marker([55.7558, 37.6177]).addTo(map).bindPopup('uyy7765   ');;

      var increment1 = 0.001;
      var increment2 = 0.002;

      console.log('increment1',typeof(increment1));
      console.log('increment2',typeof(increment2));

      function move() {
          if (!map.getBounds().contains(marker.getLatLng())) {
              increment1 *= -1;
              increment2 *= -1;
          }


          if (gon.drivers) {


            gon.drivers.forEach(function(driver) {
              var car = driver.cars.filter(function(car){
                return car.workhorse == true;
              });
              if (car[0].coordinates) {
                console.log('car[0].coordinates',car[0].coordinates);
                console.log('car[0].coordinates[0]',car[0].coordinates[0]);
                console.log('car[0].coordinates[1]',car[0].coordinates[1]);

                var increment3 = car[0].coordinates[0] - marker.getLatLng().lat;
                var increment4 = car[0].coordinates[1] - marker.getLatLng().lng;

                console.log('increment3',typeof(increment3));
                console.log('increment4',typeof(increment4));


                var newLat = marker.getLatLng().lat + increment3,
                    newLng = marker.getLatLng().lng + increment4;


                console.log('newLat',newLat);
                console.log('newLng',newLng);

                marker.setLatLng([newLat, newLng]);

              }
            });

          }

          clearInterval(intervalID);
      }

      var intervalID = setInterval(move, 60);
    });


  .title = link_to "«#{ t('service_name') }»", root_url, id:'service_name' 
  div class="menu-map" title="#{ t('.menu') }" 
    .dropbtn onclick="dropFunction()"
      i class="fas fa-bars fa-3x"
    .dropup-content#menuDropup
      = link_to 'RU / EN', change_language_maps_url, id:'langbtn', 
        data: { onclick:'changeLangFunction()'}
      - if user_signed_in?
        = link_to "#{ t('sign_out') }", destroy_user_session_url, method: :delete
        - if params[:car].present?
          = link_to "#{ t('edit_ride') }", menu_car_rides_url(car_id: params[:car])
        - else
          = link_to t("go_to_profile").html_safe, drivers_splitter_path

      - else
        = link_to "#{ t('sign_up') }", new_user_registration_url
        = link_to "#{ t('sign_in') }", new_user_session_url

    javascript: 
      function dropFunction() {
        var elem = document.getElementById("menuDropup");
        if (elem.style.display=="block") {
          elem.style.display = "none";
        } else {
          elem.style.display = "block";
        }        
      }
